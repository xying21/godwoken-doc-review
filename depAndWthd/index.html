<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-1.1(WIP) plugin-docs plugin-id-default docs-doc-id-depAndWthd">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="alternate" type="application/rss+xml" href="/godwoken-doc-review/blog/rss.xml" title="Godwoken Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/godwoken-doc-review/blog/atom.xml" title="Godwoken Documentation Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-215912231-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>


<link rel="preconnect" href="https://cryptapeblog.matomo.cloud/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://cryptapeblog.matomo.cloud/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","2"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script><title data-rh="true">Deposit and Withdrawal | Godwoken Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://xying21.github.com/godwoken-doc-review/depAndWthd"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.1(WIP)"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.1(WIP)"><meta data-rh="true" name="docsearch:version" content="1.1(WIP)"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.1(WIP)"><meta data-rh="true" property="og:title" content="Deposit and Withdrawal | Godwoken Documentation"><link data-rh="true" rel="icon" href="/godwoken-doc-review/img/favicon.png"><link data-rh="true" rel="canonical" href="https://xying21.github.com/godwoken-doc-review/depAndWthd"><link data-rh="true" rel="alternate" href="https://xying21.github.com/godwoken-doc-review/depAndWthd" hreflang="en"><link data-rh="true" rel="alternate" href="https://xying21.github.com/godwoken-doc-review/depAndWthd" hreflang="x-default"><link rel="stylesheet" href="/godwoken-doc-review/assets/css/styles.e38f19fc.css">
<link rel="preload" href="/godwoken-doc-review/assets/js/runtime~main.976a6747.js" as="script">
<link rel="preload" href="/godwoken-doc-review/assets/js/main.a3f68b6c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.nervos.org/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/godwoken-doc-review/img/favicon.png" alt="Nervos" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/godwoken-doc-review/img/favicon.png" alt="Nervos" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title text--truncate">Godwoken Documentation</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/godwoken-doc-review/">1.1(WIP)</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/godwoken-doc-review/next/decentralizationRoadmap">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/godwoken-doc-review/depAndWthd">1.1(WIP)</a></li><li><a class="dropdown__link" href="/godwoken-doc-review/0.10.4/">0.10.4</a></li></ul></div><a href="https://github.com/nervosnetwork/godwoken" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discord.gg/TfC9rExfHh" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_dLyj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_mKqt"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><div class="docPage_ualW"><aside class="theme-doc-sidebar-container docSidebarContainer_UQUJ"><div class="sidebar_RiAD sidebarWithHideableNavbar_d0QC"><a href="https://www.nervos.org/" target="_blank" rel="noopener noreferrer" tabindex="-1" class="sidebarLogo_YUvz"><img src="/godwoken-doc-review/img/favicon.png" alt="Nervos" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/godwoken-doc-review/img/favicon.png" alt="Nervos" class="themedImage_W2Cr themedImage--dark_oUvU"><b>Godwoken Documentation</b></a><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/godwoken-doc-review/">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/godwoken-doc-review/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/godwoken-doc-review/gwtxLife">Godwoken Transaction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/godwoken-doc-review/depAndWthd">Deposit and Withdrawal</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/godwoken-doc-review/godwokenkicker">Deployment</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/godwoken-doc-review/integration">Integration Guide for Ethereum Developers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/godwoken-doc-review/godwokenbridge">Godwoken Bridge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/godwoken-doc-review/releaseNote">Godwoken V1.1 Release Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/godwoken-doc-review/faq">FAQ</a></li></ul></nav></div></aside><main class="docMainContainer_uL0j"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_nDMA"><div class="docItemContainer_p3Qu"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/godwoken-doc-review/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_kU5B"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Introduction</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Deposit and Withdrawal</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.1(WIP)</span><div class="tocCollapsible_bZGK theme-doc-toc-mobile tocMobile_diN6"><button type="button" class="clean-btn tocCollapsibleButton_l22C">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Deposit and Withdrawal</h1></header><p>Deposits and withdrawals comprise a special messaging mechanism between layer 1 (CKB) and layer 2 (Godwoken) that enables the exchange of assets through the transfer function. Users can deposit assets from layer 1 to layer 2, or withdraw assets from layer 2 to layer 1.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="deposit">Deposit<a class="hash-link" href="#deposit" title="Direct link to heading">​</a></h2><p>When a layer 1 transaction is sent, it creates a deposit request by generating a cell with a special lock, the deposit lock. The block producer will collect these cells and process the deposit requests in the blocks. It will unlock the deposit cells, move the assets under the custodian lock, update the layer 2 state and submit layer 1 transactions in the blocks. The block producer cannot take away these assets, because a layer 1 script verifies these transactions.</p><p>The deposit cell:</p><div class="language-yaml codeBlockContainer_MPoW theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-yaml codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">lock</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">code_hash</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">   (the deposit lock&#x27;s code hash)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">hash_type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">   Type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> (rollup_type_hash(32 bytes) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token plain"> DepositLockArgs)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">capacity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> (the amount of CKB to be deposited)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">type_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">  (none or SUDT script)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">   (none or SUDT amount)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>lock</code> field of the deposit cell uses the deposit lock. The first 32 bytes of <code>args</code> is a unique value associated with the rollup instance. <code>DepositLockArgs</code> indicates the layer 2 account to which the deposit will be made. <code>capacity</code> is the total amount of CKB deposited. The <code>type_</code> and <code>data</code> fields comply with the CKB Simple UDT format. With these fields, users can deposit Simple UDT assets to layer 2.</p><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#bfc7d5"><span class="token plain">table DepositLockArgs {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // layer1 lock hash</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    owner_lock_hash: Byte32,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    layer2_lock: Script,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    cancel_timeout: Uint64,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    registry_id: Uint32,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>DepositLockArgs</code> represents the script and <code>registry_id</code> of a layer 2 account, which currently supports only the ETH registry. Users can cancel a deposit after the expiration of <code>cancel_timeout</code>, which can be used by the block producer to reject packed deposit cells containing invalid data.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="custodian-cell">Custodian Cell<a class="hash-link" href="#custodian-cell" title="Direct link to heading">​</a></h2><p>When assets are deposited to layer 2, deposit cells are converted to custodian cells. The custodian lock protects custodian cells and restricts the transfer of assets so users can only make withdrawals.</p><p>The custodian cell:</p><div class="language-yaml codeBlockContainer_MPoW theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-yaml codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">lock</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">code_hash</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">    (the custodian lock&#x27;s code hash)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">hash_type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">    Type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> (rollup_type_hash(32 bytes) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token plain"> CustodianLockArgs)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">capacity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">   (the amount of CKB to be deposited)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">type_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">  (none or SUDT script)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">   (none or SUDT amount)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The first 32 bytes of <code>args</code> are unique values associated with the rollup instance. <code>CustodianLockArgs</code> contains deposit information. <code>capacity</code> is the amount of CKB to be deposited. The <code>type_</code> and <code>data</code> fields are following CKB Simple UDT format.</p><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#bfc7d5"><span class="token plain">table CustodianLockArgs {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    deposit_block_hash: Byte32,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    deposit_block_number: Uint64,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    deposit_lock_args: DepositLockArgs,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>CustodianLockArgs</code> stores the entire deposit information. <code>deposit_lock_args</code> is the args from the original deposit cell. <code>deposit_block_hash</code> and <code>deposit_block_number</code> denote the layer2 block that contains the deposit.</p><p>The <code>capacity</code> of a cell must cover the cost of the cell. The <code>capacity</code> of the deposit cell must also cover its custodian cell, so the minimum deposit capacity that Godwoken allows is as follows:</p><ul><li>Deposit CKB: 298 CKB</li><li>Deposit CKB and Simple UDT: 379 CKB</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="withdrawal">Withdrawal<a class="hash-link" href="#withdrawal" title="Direct link to heading">​</a></h2><p>Users sign withdrawal requests and send them to the block producer. The block producer will process these requests in the blocks, update the layer2 state, and convert custodian cells to withdrawal cells in layer1 block submission transactions.</p><p>The withdrawal cell:</p><div class="language-yaml codeBlockContainer_MPoW theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-yaml codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">lock</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">code_hash</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">    (the withdrawal lock&#x27;s code hash)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">hash_type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">    Type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> (rollup_type_hash(32 bytes) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token plain"> WithdrawalLockArgs (n bytes) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token plain"> len (4 bytes) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token plain"> layer1 owner lock (n bytes))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">capacity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">   (the CKB amount to be withdrawn)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">type_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">  (none or SUDT script)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">   (none or SUDT amount)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Withdrawal lock guarantees the user can unlock this cell after <code>finality blocks</code>.</p><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#bfc7d5"><span class="token plain">struct WithdrawalLockArgs {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    withdrawal_block_hash: Byte32,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    withdrawal_block_number: Uint64,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    account_script_hash: Byte32,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // layer1 lock to withdraw after challenge period</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    owner_lock_hash: Byte32,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>withdrawal_block_hash</code> and <code>withdrawal_block_number</code> record the layer2 block containing the withdrawal. <code>account_script_hash</code> denotes the layer2 account. <code>owner_lock_hash</code> denotes the layer1 lock that is used to unlock the cell.</p><p>The <code>capacity</code> of a cell must cover the cost of the cell, so the minimum withdrawal capacity that Godwoken allows is as follows:</p><ul><li>Withdrawal CKB: 266 CKB</li><li>Withdrawal CKB and Simple UDT: 347 CKB</li></ul></div></article><div id="disqus_thread"></div><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/godwoken-doc-review/gwtxLife"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Godwoken Transaction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/godwoken-doc-review/godwokenkicker"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Godwoken-Kicker</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#deposit" class="table-of-contents__link toc-highlight">Deposit</a></li><li><a href="#custodian-cell" class="table-of-contents__link toc-highlight">Custodian Cell</a></li><li><a href="#withdrawal" class="table-of-contents__link toc-highlight">Withdrawal</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Nervos Foundation. All Rights Reserved.</div></div></div></footer></div>
<script src="/godwoken-doc-review/assets/js/runtime~main.976a6747.js"></script>
<script src="/godwoken-doc-review/assets/js/main.a3f68b6c.js"></script>
</body>
</html>